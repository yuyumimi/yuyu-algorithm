---
{"dg-publish":true,"permalink":"/计算机基础/位运算/"}
---

## 定义

位运算就是直接对整数在内存中 的二进制位进行操作。

## 进制之间的转换

转换正整数的进制，简单方法：
就是通过目标基数作长除法，余数给出从最低位开始的数字。

例如：
10进制转7进制就是
除以7得到所有余数
2进制转5进制就是
除以101得到所有余数



| 含义 | 符号 |  |
| ---- | ---- | ---- |
| 按位与 | a$b | 判断一个整数的奇偶 |
| 按位或 | a\|b | 把一个数强行变成最接近的偶数 |
| 按位异或 | a^b | （a^b）^b=a |
| 按位取反 | ~a |  |



## 原码、反码、补码

### 原码

最简单的机器数表示法。用最高位表示符号位，1表示负号，0表示正号。其他位表示该数的二进制的绝对值。

1：0001
-1：1001


### 反码
为了解决负数的原码的相加的运算错误问题，引入了反码表示。
在反码中：
正数的反码等于原码
负数的反码就是他的原码除符号位外，按位取反

尽管反码解决了加法问题，但仍然存在溢出和零的表示问题。

### 补码
为了彻底解决加法和表示问题，引入了补码表表示。

正数的补码等于原码

负数的补码：
1. 就是反码+1
2. 原码自低位向高位开始的第一个‘1’及其右边的0保持不变，左边的各位按位取反，符号位不变。


### 位运算简单应用

| 功能 | 示例 | 位运算 |
| ---- | ---- | ---- |
| 去掉最后一位 | 110011->11001 | x>>1 |
| 在最后加一个0 | 110011->110010 | x<<1 |
| 在最后加一个1 | 110011->110011 | (x<<1)+1 |
| 把最后一位变成1 | 101100->101101 | x\|1 |
| 把最后一位变成0 | 101101->101100 | (x\|1)-1 |
| 最后一位取反 | 101101->101100 | x^1 |
| 把右数第k位变成1 | 101001->101101,k=3 | x^(1<<(k-1)) |
| 把右数第k位变成0 | 101101->101001,k=3 | x&(~(1<<(k-1))) |
| 取末三位 | 101101->101 | x&7 |
| 取右数第k位 | 101101->1，k=4 | x>>(k-1)&1 |
| 把末k位变为1 | 101001->101001，k=4 | x\|(1<<(k-1)) |
| 末k位取反 | 101001->100110，k=4 | x^((1<<k)-1) |
| 把右边连续的1变成0 | 100101111->100100000 | x&(x+1) |
| 把右起第一个0变成1 | 100101111->100111111 | x\|(x+1) |
| 把右边连续的0变成1 | 11011000->11011111 | x\|(x-1) |
| 取右边连续的1 | 100101111->1111 | (x^(x+1))>>1 |
| 去掉右起第一个1的左边 | 100101000->1000 | x&(-x) === x&(~x+1) |
| 从右边开始第一个1改写成0 | 100101000->100100000 | x&(x-1) |
|  |  |  |

# 位运算面试题

![pic00001.png](/img/user/pic/pic00001.png)

```java
public class Main {
	public static void main(String[] args) {
        
	   System.out.println( c(13,15));
	}
	private static int c(int left,int right){
	    int res=0;
	    for (int i=30; i>=0;i-- ){
	        if((left >> i & 1) != (right >> i & 1)) break;
	        if((left >> i & 1) == 1) res += 1 << i;
	    } 
	    return res;
	}
}

```